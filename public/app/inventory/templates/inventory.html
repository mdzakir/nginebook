<h2 class="page-title">Inventory 
	<button type="button" ng-if="!showUpdateInventoryForm" class="btn btn-primary pull-right" ng-click="showUpdateInventoryFormFn();">Update Inventory</button>
	<button type="button" ng-if="showUpdateInventoryForm" class="btn btn-primary pull-right" ng-click="hideUpdateInventoryFormFn();"><i class="fa fa-times"></i> Close Form</button>
</h2>

<div class="pull-right">
    <span class="label label label-warning">Sold</span>
    <span class="label label-success">Available</span>
    <span class="label label label-danger">Blocked</span>
</div>

<div class="inventoryChart">
    <div class="top-bar">
        <div class="left-space">&nbsp;</div>
        <div class="nav-bar">
            <span class="icon-arrow-left-3 left-nav inv-nav col-md-1" ng-click="previousDates();"><i class="fa fa-chevron-left"></i></span>
            <div class="form-horizontal start-date-form col-md-8 col-md-offset-1">
                <div class="form-group">
                    <label class="control-label col-md-4"></label>
                    <div class="col-md-4">
                        <input type="text" class="form-control dp uidpInventory" uib-datepicker-popup="{{format}}" ng-model="cal_start_date" ng-change="startDateChanged();" 
						is-open="open_cal_start_popup.opened" datepicker-options="calDateOptions" ng-required="true" 
						close-text="Close" alt-input-formats="altInputFormats" ng-focus="open_cal_start()" readonly="readonly"/>
                    </div>
                </div>
            </div>
            <span class="icon-arrow-right-3 right-nav inv-nav col-md-1" ng-click="nextDates();"><i class="fa fa-chevron-right"></i></span>
        </div>
    </div>
    
    <div class="invDatesColumn">
    	<div class="data-table-header">
	    	<div class="left-col"><div class="data-table-title">Rooms</div></div>
	        <div class="datesRow" id="datesCount">
	            <div class="datesWrapper" ng-repeat="(key, value) in inventoryData[0].inventory_list track by $index" ng-if="$index < 15">
	                <span>{{key | date:'MMM'}}</span>
	                <span>{{key | date:'yyyy'}}</span>
	                <span>{{key | date:'EEE'}}</span> <span class="datesq">{{key | date:'dd'}}</span>
	            </div>
	        </div>
	    </div>
        <div class="invRowWrapper">
	        <div class="invRow" ng-repeat="inventory_list in inventoryData">
			    <div class="left-col">
			    	<div class="room-list">{{inventory_list.room_name}}</div>
			    </div>
			    <div class="inv-data-row">
		            <div class="invCol" ng-repeat="(key, value) in inventory_list.inventory_list  track by $index" ng-if="$index < 15">
		                <span class="invsq greenBG">{{value.available}}</span>
		                <span class="invsq orangeBG">{{value.booked}}</span>
		                <div class="block-unblock" ng-click="blockUnblock(key);">Block</div>
		            </div>
		        </div>
	        </div>
        </div>
    </div>
</div>

<form class="well update-inv-form" ng-if="showUpdateInventoryForm">
	<h4>Update Inventory</h4>
	<div class="row">
		<div class="col-md-3">
			<div class="form-group">
				<label class="">Start date</label>
				<div class="">
					<input type="text" class="form-control dp" uib-datepicker-popup="{{format}}" ng-model="start_date" 
					is-open="start_date_popup.opened" datepicker-options="dateOptions" ng-required="true" 
					close-text="Close" alt-input-formats="altInputFormats" ng-focus="open_start()"/>
				</div>
			</div>
		</div>
		<div class="col-md-3">
			<div class="form-group">
				<label class="">End date</label>
				<div class="">
					<input type="text" class="form-control dp" uib-datepicker-popup="{{format}}" ng-model="end_date" 
					is-open="end_date_popup.opened" datepicker-options="dateOptions" ng-required="true" 
					close-text="Close" alt-input-formats="altInputFormats" ng-focus="open_end()"/>
				</div>
			</div>
		</div>
		<div class="col-md-3">
			<div class="form-group">
				<label class="">Room Type</label>
				<div class="">
				<select class="form-control" ng-model="room" ng-change="roomChange(room);" ng-options="room.id as room.name for room in rooms"></select>
				</div>
			</div>
		</div>
		<div class="col-md-3">
			<div class="form-group">
				<label class="">Inventory</label>
				<div class="">
					<input type="number" ng-model="availablity" ng-maxlength="200" name="" class="form-control" />
				</div>
			</div>
		</div>
	</div>
	<div class="row">
		<div class="col-md-12">
			<div class="form-group tac">
				<button type="button" class="btn btn-success" ng-click="updateInventory();"><i class="fa fa-save"></i> Update</button>
			</div>
		</div>
	</div>
</form>
